<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Taco Cloud</title>
    <img th:src="@{/img/logo1.png}"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link th:href="@{/shards.css}" rel="stylesheet"/>
</head>
<body>


<H1>All Holidays</H1>

<!--/*@thymesVar id="holiday" type="Holiday"*/-->
<form method="GET" th:action="@{/holidays/my-holidays}" th:object="${user}">
    <div class="holidays">
        <div>
            <select class="custom-select" id="example" onChange="CityChange()">
                <option disabled selected th:value="currentholiday">Choose your holiday</option>
                <option th:each="i : ${user.usersHolidays}" th:value="${i.name}"
                        th:text="${i.name} + '' + ${i.place.country}">

                </option>
            </select>

            <div th:each="i, stat : ${user.usersHolidays}" th:id="${i.name}" style="display: none">

                <div th:id="'carousel-' + ${stat.index + 1}" class="carousel slide" data-ride="carousel">
                    <ol class="carousel-indicators">
                        <li th:data-target="'#carousel-' + ${stat.index + 1}" data-slide-to="0" class="active"></li>
                        <li th:data-target="'#carousel-' + ${stat.index + 1}" data-slide-to="1"></li>
                    </ol>
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img class="d-block w-100" th:src="@{/img/im1.jpg}" alt="First slide">
                            <div class="carousel-caption d-none d-md-block">
                                <h5 class="text-white" th:text="${i.place.city}"></h5>
                                <p>Caption Subtitle</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <img class="d-block w-100" th:src="@{/img/im2.jpg}" alt="Second slide">
                            <div class="carousel-caption d-none d-md-block">
                                <h5 class="text-white" th:text="${i.place.city}">Caption Title</h5>
                                <p>Caption Subtitle</p>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <img class="d-block w-100" th:src="@{/img/im1.jpg}" alt="Second slide">
                            <div class="carousel-caption d-none d-md-block">
                                <h5 class="text-white" th:text="${i.place.city}">Caption Title</h5>
                                <p>Caption Subtitle</p>
                            </div>
                        </div>
                    </div>
                    <a class="carousel-control-prev" th:href="'#carousel-' + ${stat.index + 1}" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" th:href="'#carousel-' + ${stat.index + 1}" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>


                <label>Place: </label>
                <ul>
                    <li th:text="${i.place.country.getCountryName()}"></li>
                    <li th:text="${i.place.city}"></li>
                    <li th:text="${i.place.street}"></li>
                </ul>

                <label>Transport: </label>
                <ul>
                    <li th:text="${i.transport.type}"></li>
                </ul>

                <div th:if="${!i.place.dreamed}">
                    <label>Date status: </label>
                    <ul>
                        <li th:text="${i.startDate}"></li>
                        <li th:text="(${i.startDate.getTime()} - ${user.currentDate.getTime()}) / (24 * 60 * 60 * 1000)"></li>
                        <li th:text="${i.getTimePercent()}"></li>
                        <div th:if="${i.getTimePercent() < 70}">
                            <div class="progress">
                                <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
                                     th:style="'width: ' + ${i.getTimePercent()} + '%'"
                                     th:aria-valuenow="${i.getTimePercent()}" aria-valuemin="0"
                                     aria-valuemax="100"></div>
                            </div>
                        </div>
                        <div th:if="${i.getTimePercent() >= 70}">
                            <div class="progress">
                                <div class="progress-bar progress-bar-striped bg-success" role="progressbar"
                                     th:style="'width: ' + ${i.getTimePercent()} +'%'"
                                     th:aria-valuenow="${i.getTimePercent()}" aria-valuemin="0"
                                     aria-valuemax="100"></div>
                            </div>
                        </div>

                    </ul>
                </div>

                <label>Weather: </label>
                <ul>
                    <li th:text="${i.weather.currentWeather}"></li>
                    <li th:text="${i.weather.forecast}"></li>
                </ul>

                <h3>Interesting places</h3>
                <div th:each="string : ${i.interestingPlacesUrls}">
                    <a th:href="${string}" th:text="${string}"></a>
                </div>

                <div th:if="${i.place.dreamed}">
                    <label>Start Capital: </label>
                    <ul>
                        <li th:text="${i.startCapital}"></li>
                    </ul>
                </div>



            </div>

            <script>

                function CityChange() {
                    var last = document.getElementsByTagName('option');

                    Array.prototype.forEach.call(last , function(el) {
                        el.style.display = "none"
                    });

                    document.getElementById(document.getElementById('example').value).style.display = "inherit";

                }
            </script>


<!--            // document.getElementById(currentId).innerHTML = document.getElementById(document.getElementById('example').value).innerHTML-->


            <div id="currentholiday" style="display: none">
                <h3>Choose your holiday</h3>
            </div>



            <h3>Weather</h3>


            <div>
                <h3>baggage</h3>

            </div>
            <div>
                <h3>actual photo</h3>
            </div>


        </div>

    </div>


</form>

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
<script type="application/json" src="/js/shards.js"></script>
<script type="text/javascript" th:src="@{/js/shards.js}"></script>
<script type="text/javascript" th:src="@{/js/myjs.js}"></script>
<!--<script type="text/javascript" th:src="@{/js/bootstrap4.js}"></script>-->

</body>
</html>